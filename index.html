<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1"><meta name=monetization content=$ilp.uphold.com/2kD7NjJBDjBb><style>body{margin:0;text-align:center;background:#000}body,canvas{touch-action:none;user-select:none}</style><canvas id=c></canvas><script>(()=>{var e={},t=t=>e[t]||0,i=t=>delete e[t];addEventListener("keydown",(t=>{t.preventDefault(),t.repeat||(e[t.code]=performance.now())})),addEventListener("keyup",(e=>i(e.code)));var n=(...e)=>Math.max(...e.map((e=>t(e)))),a=()=>Object.keys(e).filter((e=>t(e))).length,o=e=>!!t(e)&&i(e),r=(e,t,i)=>Math.max(t,Math.min(e,i));function h(e,t,i){return 0>i?e:i>1?t:e*(1-i)+t*i}function l(e){return new Promise((t=>{var i=new Image;i.onload=()=>{t(i)},i.src=e}))}var g,s=0,d=0,w=0,y=0,v=0,f=0,m=0,p=0,x=0;addEventListener("pointerdown",(e=>{e.preventDefault(),g=e,x=performance.now(),[s,d]=[m,p]=[v,f]=M()})),addEventListener("pointermove",(e=>{e.preventDefault(),g=e,[s,d]=M(),x&&(s>m?w=h(0,1,((m=s)-v)/30):v>s?w=-h(0,1,(m-(v=s))/30):m>s&&w>=0?(v=s,w=0):s>v&&0>=w&&(m=s,w=0),d>p?y=h(0,1,((p=d)-f)/30):f>d?y=-h(0,1,(p-(f=d))/30):p>d&&y>=0?(f=d,y=0):d>f&&0>=y&&(p=d,y=0))})),addEventListener("pointerup",(e=>{e.preventDefault(),g=e,x=0,w=y=v=f=m=p=0}));var A,u,M=()=>[Math.floor(g.pageX),Math.floor(g.pageY)],R=()=>x,E=()=>!!R()&&(x=!0),k=/iPhone|iPad|Android/i.test(navigator.userAgent);function b(e,t,i,n=0,a=1){const o=8*a,r=e.length*o+(e.length-1)*a,h=2===n?r:1===n?r/2:0;[...e].forEach(((e,n)=>{u.drawImage(A,8*"abcdefghijklmnopqrstuvwxyz0123456789.:!-%,/".indexOf(e),0,8,8,t+n*a*9-h,i,o,o)}))}new(window.AudioContext||webkitAudioContext);var X,Y,D,L=["ArrowUp","ArrowUp","ArrowDown","ArrowDown","ArrowLeft","ArrowRight","ArrowLeft","ArrowRight","KeyB","KeyA"],S=0,U=0,I=c.getContext("2d"),K=c.cloneNode(),N=K.getContext("2d");K.width=640,K.height=480;var P=c.cloneNode(),T=P.getContext("2d");P.width=640,P.height=480;var j,F,B,Q,O=0,G=0,Z=100,z={hero:{firingRate:.1,speed:75,w:10,h:10},bullet:{speed:400,w:1,h:10},foe:{speed:100}},C=!0;function H(e,t,i=0,n=0){return{...z[e],collisionGroup:t,moveDown:0,moveLeft:0,moveRight:0,moveUp:0,velX:0,velY:0,type:e,x:i,y:n}}function V(e){const t=e.speed*F*(e.velX&&e.velY?.7071067811865476:1);e.x+=t*e.velX,e.y+=t*e.velY}function W(){C&&(Q=requestAnimationFrame(W),j=performance.now(),F=(j-B)/1e3,(()=>{switch((()=>{switch(U){case 0:o(L[S])&&S++,(a()||E())&&(S=0,O=G=0,X=H("hero",1,160,120),Y={x:X.x,y:X.y},D=[X],N.fillStyle="#ccc",N.fillRect(0,0,K.width,K.height),N.fillStyle="#777",[0,2,4,6,8,10].forEach((e=>{[0,2,4,6,8,10].forEach((t=>{N.fillRect(64*e,48*t,64,48),N.fillRect(64*(e+1),48*(t+1),64,48)}))})),U=1);break;case 1:[Y.x,Y.y]=(()=>{const[e,t]=(i=c.width,n=c.height,[r((g.x||g.pageX)-(innerWidth-i)/2,0,i),r(g.y||g.pageY,0,n)].map(Math.round));var i,n;return[320*e/c.width+O,240*t/c.height+G].map(Math.round)})(),X.firing=R(),X.moveLeft=n("ArrowLeft","KeyA","KeyQ"),X.moveRight=n("ArrowRight","KeyD"),X.moveUp=n("ArrowUp","KeyW","KeyZ"),X.moveDown=n("ArrowDown","KeyS"),X.velX=X.moveLeft||X.moveRight?(X.moveLeft>X.moveRight?-1:1)*h(0,1,(j-Math.max(X.moveLeft,X.moveRight))/150):0,X.velY=X.moveDown||X.moveUp?(X.moveUp>X.moveDown?-1:1)*h(0,1,(j-Math.max(X.moveUp,X.moveDown))/150):0;break;case 2:o("KeyT")&&(async e=>{if(navigator.canShare&&navigator.canShare(e))try{await navigator.share(e)}catch{}else open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(e.text)}%20${encodeURIComponent(e.url)}`,"_blank")})({title:document.title,text:"Check this game template made by @herebefrogs",url:"https://bit.ly/gmjblp"}),(a()||E())&&(U=0)}})(),U){case 1:D.forEach(V),(()=>{const e=X.x+X.w/2,t=X.y+X.h/2,[i,n,a]=((e,t,i,n)=>{const a=Math.sqrt(Math.pow(i-e,2)+Math.pow(n-t,2)),o=i-e,r=n-t;return[o/a,r/a,Math.atan2(r/a,o/a)]})(e,t,Y.x,Y.y);if(X.gunAngle=a,X.firing){if(X.firingTime||=X.firingRate,X.firingTime+=F,X.firingTime>X.firingRate){X.firingTime%=X.firingRate;const[o,r]=((e,t,i,n)=>[e+20*Math.cos(n),t+20*Math.sin(n)])(e,t,0,a);D.push({...H("bullet",1,o,r),angle:a,velX:i,velY:n})}}else X.firingTime=0})(),D.slice(1).forEach((e=>{const t=((e,t)=>{const i={entity1MaxX:e.x+e.w,entity1MaxY:e.y+e.h,entity2MaxX:t.x+t.w,entity2MaxY:t.y+t.h};return i.collide=e.collisionGroup!=t.collisionGroup&&i.entity2MaxX>e.x&&i.entity1MaxX>t.x&&i.entity2MaxY>e.y&&i.entity1MaxY>t.y,i})(X,e);t.collide&&((e,t,i)=>{const{entity1MaxX:n,entity1MaxY:a,entity2MaxX:o,entity2MaxY:r}=i,h=n-t.x,l=a-t.y,c=o-e.x,g=r-e.y;e.velX>0&&e.velY>0?l>h?e.x-=h:e.y-=l:e.velX>0&&0>e.velY?g>h?e.x-=h:e.y+=g:e.velX>0?e.x-=h:0>e.velX&&e.velY>0?l>c?e.x+=c:e.y-=l:0>e.velX&&0>e.velY?g>c?e.x+=c:e.y+=g:0>e.velX?e.x+=c:e.velY>0?e.y-=l:0>e.velY&&(e.y+=g)})(X,e,t)})),0>(e=X).x?e.x=0:e.x>K.width-e.w&&(e.x=K.width-e.w),0>e.y?e.y=0:e.y>K.height-e.h&&(e.y=K.height-e.h),O>0&&O+Z>X.x?O=Math.max(0,X.x-Z):K.width>O+Z+120&&X.x+X.w>O+Z+120&&(O=Math.min(K.width-320,X.x+X.w-220)),G>0&&G+50>X.y?G=Math.max(0,X.y-50):K.height>G+50+140&&X.y+X.h>G+50+140&&(G=Math.min(K.height-240,X.y+X.h-190))}var e})(),(()=>{switch(T.fillStyle="#fff",T.fillRect(0,0,P.width,P.height),U){case 0:b("title screen",8,8),b(k?"tap to start":"press any key",160,120,1),S===L.length&&b("konami mode on",P.width-8,8,2);break;case 1:T.drawImage(K,0,0,P.width,P.height),b("game screen",O+8,G+8),D.forEach((e=>((e,t=T)=>{switch(e.type){case"hero":t.save(),t.translate(e.x,e.y),0>X.gunAngle?(t.save(),t.translate(e.w/2,e.h/2),t.rotate(e.gunAngle+Math.PI/2),t.fillStyle="#ee1",t.fillRect(-2,-e.h,4,10),t.restore(),t.fillStyle="#1e1",t.fillRect(0,0,e.w,e.h)):(t.fillStyle="#1e1",t.fillRect(0,0,e.w,e.h),t.translate(e.w/2,e.h/2),t.rotate(e.gunAngle+Math.PI/2),t.fillStyle="#ee1",t.fillRect(-2,-e.h,4,10)),t.restore();break;case"bullet":t.save(),t.translate(e.x,e.y),t.rotate(e.angle+Math.PI/2),t.fillStyle="#e1e",t.fillRect(0,0,e.w,e.h),t.restore()}})(e))),(()=>{T.strokeStyle="#fff",T.lineWidth=2;const e=X.firing?10:12,t=X.firing?5:6;T.strokeRect(Y.x-1,Y.y-1,2,2),T.strokeRect(Y.x-t,Y.y-t,e,e)})();break;case 2:b("end screen",8,8)}I.drawImage(P,O,G,320,240,0,0,c.width,c.height)})(),B=j)}function q(e){(C=e)?(B=performance.now(),W()):cancelAnimationFrame(Q)}onload=async()=>{document.title="Stand By Me",onresize(),await(async e=>{u=e,A=await l("data:image/webp;base64,UklGRngBAABXRUJQVlA4TGwBAAAvV8EBEB8gFkz258+bhkAgiWF/1wkEKAr/L5v/APCvBpIbwI0jiYD/0n9D4RzKZze0EtD672FnsP8Ngdyjj58hNIFh2ZtCRP8Vtm3bOED3UJ1eERFttqgREbO1GQQQS+Jca1QaDwpGnBHXek3SGi0ZiKOKiOS+1ykiE0al8gXudIFjgbt3hdJ4Ep0ErBMN1BXWC3OkRhF58Q85zJn/+T/RPjuUJ4IdxhW2mu944p2YTGRbRpntp23LxmRPIn96wL69T4OR7MSV9+Mr+g77pvjQathhF4OFXX7Bsz1K16GjDIXhpHBLuUER/vfED/tmKzn49W963N9hl/2yr+ydbepfYNuSZdeeWwu7zQXY28P7nPO8Q2GDsgZjAj/kZN2TbxR8Xi3b2cFjK1jcT5YcORVO8q5eO+VmlE5yP3sXdKRjyfRpKEvEf4/Fpc2TgyofNGvMiMNBco2Yed81rsTFPzgy6rVd67Hkjkh7vUoT")})(T),await l("data:image/webp;base64,UklGRvoAAABXRUJQVlA4TO0AAAAvT0AEEDegkI0kaD+kdVj40zgoxYwkQfMfg2v9l2M9lkVNACQMNCEIOPq3MIcHQbZNzcZ+sgcAlZ/5PdWeeOv2wFEjSY40hsA6AKNGsFJJ/T/DYLQIHH8MN129s4cgov8M3LaNw7a7txjZL8LDMf4r1rB0GSKbF4K5y4uBYq1A7jI7NNPSPhx6rQhN3S6ELpWd5FLH6IMjN7si35Udo6HZUgsM1NDha+wM4Efs2i4OQugUTtuccnZpNrxcDsoNs07A9qEHl7O/h4PmDm65el34+cPABatIskq6UUQaaUtaABHLKZAohglQpAV4vgkA"),q(!0)},onresize=onrotate=()=>{scaleToFit=Math.min(innerWidth/P.width,innerHeight/P.height),c.width=P.width*scaleToFit,c.height=P.height*scaleToFit,I.imageSmoothingEnabled=N.imageSmoothingEnabled=T.imageSmoothingEnabled=!1,window.focus()},document.onvisibilitychange=e=>{q(!e.target.hidden)},addEventListener("keydown",(e=>{e.repeat||1!==U||"KeyP"!==e.code||q(!C)}))})();</script>