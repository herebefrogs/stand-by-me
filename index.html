<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1"><meta name=monetization content=$ilp.uphold.com/2kD7NjJBDjBb><style>body{margin:0;text-align:center;background:#000}body,canvas{touch-action:none;user-select:none}</style><canvas id=c></canvas><script>(()=>{var e={},t=t=>e[t]||0,i=t=>delete e[t];addEventListener("keydown",(t=>{t.preventDefault(),t.repeat||(e[t.code]=performance.now())})),addEventListener("keyup",(e=>i(e.code)));var a=(...e)=>Math.max(...e.map((e=>t(e)))),n=()=>Object.keys(e).filter((e=>t(e))),o=()=>n().length,l=e=>!!t(e)&&i(e),r=(e,t,i)=>Math.max(t,Math.min(e,i));function h(e,t,i){return 0>i?e:i>1?t:e*(1-i)+t*i}function s(e){return new Promise((t=>{var i=new Image;i.onload=()=>{t(i)},i.src=e}))}var d=0,g=0,w=0,v=0,f=0,y=0,m=0,p=0,x=0,u={pageX:0,pageY:0};addEventListener("pointerdown",(e=>{e.preventDefault(),u=e,x=performance.now(),[d,g]=[m,p]=[f,y]=M()})),addEventListener("pointermove",(e=>{e.preventDefault(),u=e,[d,g]=M(),x&&(d>m?w=h(0,1,((m=d)-f)/30):f>d?w=-h(0,1,(m-(f=d))/30):m>d&&w>=0?(f=d,w=0):d>f&&0>=w&&(m=d,w=0),g>p?v=h(0,1,((p=g)-y)/30):y>g?v=-h(0,1,(p-(y=g))/30):p>g&&v>=0?(y=g,v=0):g>y&&0>=v&&(p=g,v=0))})),addEventListener("pointerup",(e=>{e.preventDefault(),u=e,x=0,w=v=f=y=m=p=0}));var A,b,k,M=()=>[Math.floor(u.pageX),Math.floor(u.pageY)],R=()=>x,E=()=>!!R()&&(x=0,!0),X=/iPhone|iPad|Android/i.test(navigator.userAgent);function Y(e,t,i,a=0,n=1){const o=8*n,l=e.length*o+(e.length-1)*n,r=2===a?l:1===a?l/2:0;[...e].forEach(((e,a)=>{k.drawImage(A,8*"abcdefghijklmnopqrstuvwxyz0123456789.:!-%,/".indexOf(e),0,8,8,t+a*n*9-r,i,o,o)}))}new(window.AudioContext||webkitAudioContext);var P,S,D,T=["ArrowUp","ArrowUp","ArrowDown","ArrowDown","ArrowLeft","ArrowRight","ArrowLeft","ArrowRight","KeyB","KeyA"],I=0,L=0,N=0,U=0,K=320,j=240,F=100,B=c.getContext("2d"),Q=c.cloneNode(),O=Q.getContext("2d");Q.width=640,Q.height=480;var G=c.cloneNode(),C=G.getContext("2d");G.width=640,G.height=480;var Z,z,H,V,W,q=(Z=c,(b=Z.cloneNode()).width=320,b.height=240,(k=b.getContext("2d")).imageSmoothingEnabled=!1,b),J={hero:{aiAngle:0,attackRate:.1,hitPoints:100,speed:75,w:10,h:10},AI:{speed:Math.PI},bullet:{damage:1,speed:400,ttl:1/0,w:1,h:10},scout:{damage:2,hitPoints:1,speed:110,w:10,h:10},tank:{damage:10,hitPoints:10,speed:55,w:40,h:40}},$=!0;function _(e){E(),n().forEach(l),L=e}function ee(e,t){const i={entity1MaxX:e.x+e.w,entity1MaxY:e.y+e.h,entity2MaxX:t.x+t.w,entity2MaxY:t.y+t.h};return i.collide=e.collisionGroup!=t.collisionGroup&&i.entity2MaxX>e.x&&i.entity1MaxX>t.x&&i.entity2MaxY>e.y&&i.entity1MaxY>t.y,i}function te(e,t,i=0,a=0){return{...J[e],collisionGroup:t,moveDown:0,moveLeft:0,moveRight:0,moveUp:0,velX:0,velY:0,type:e,x:i,y:a}}function ie(e){if(e.velX||e.velY){const t=e.speed*H*(e.velX&&e.velY?.7071067811865476:1);e.x+=t*e.velX,e.y+=t*e.velY}}function ae(e){z>e.invincibleEndTime&&(e.invincible=!1,e.hitPoints>0||(e.ttl=-1,e===P&&_(2)))}function ne(){$&&(W=requestAnimationFrame(ne),z=performance.now(),H=(z-V)/1e3,(()=>{switch((()=>{switch(L){case 0:l(T[I])&&I++,(o()||E())&&(I=0,N=U=0,P=te("hero",1,160,120),S={x:0,y:0},D=[P,{startTime:z,text:"how does one die better than facing fearfull odds?",ttl:z+5e3,type:"text",x:8,y:224},te("scout",2,K/6,8),te("scout",2,K/3,8),te("tank",2,160,16),te("scout",2,640/3,8),te("scout",2,1600/6,8)],C.fillStyle="#ccc",C.fillRect(0,0,G.width,G.height),C.fillStyle="#777",[0,2,4,6,8,10].forEach((e=>{[0,2,4,6,8,10].forEach((t=>{C.fillRect(64*e,48*t,64,48),C.fillRect(64*(e+1),48*(t+1),64,48)}))})),_(1));break;case 1:[S.x,S.y]=(()=>{const[e,t]=(i=c.width,a=c.height,[r((u.x||u.pageX)-(innerWidth-i)/2,0,i),r(u.y||u.pageY,0,a)].map(Math.round));var i,a;return[e*K/c.width+N,t*j/c.height+U].map(Math.round)})(),P.moveLeft=a("ArrowLeft","KeyA","KeyQ"),P.moveRight=a("ArrowRight","KeyD"),P.moveUp=a("ArrowUp","KeyW","KeyZ"),P.moveDown=a("ArrowDown","KeyS");break;case 2:l("KeyT")&&(async e=>{if(navigator.canShare&&navigator.canShare(e))try{await navigator.share(e)}catch{}else open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(e.text)}&url=${encodeURIComponent(e.url)}`,"_blank")})({title:document.title,text:"Check this game template made by @herebefrogs",url:"https://bit.ly/gmjblp"}),(o()||E())&&_(0)}})(),L){case 1:P.attacking=R(),P.velX=P.moveLeft||P.moveRight?(P.moveLeft>P.moveRight?-1:1)*h(0,1,(z-Math.max(P.moveLeft,P.moveRight))/150):0,P.velY=P.moveDown||P.moveUp?(P.moveUp>P.moveDown?-1:1)*h(0,1,(z-Math.max(P.moveUp,P.moveDown))/150):0,P.aiAngle+=J.AI.speed*H,P.aiAngle%=2*Math.PI,D.forEach(ie),(()=>{const e=P.x+P.w/2,t=P.y+P.h/2,[i,a,n]=((e,t,i,a)=>{const n=Math.sqrt(Math.pow(i-e,2)+Math.pow(a-t,2)),o=i-e,l=a-t;return[o/n,l/n,Math.atan2(l/n,o/n)]})(e,t,S.x,S.y);if(P.gunAngle=n,P.attacking){if(P.attackTime||=P.attackRate,P.attackTime+=H,P.attackTime>P.attackRate){P.attackTime%=P.attackRate;const[o,l]=((e,t,i,a)=>[e+i*Math.cos(a),t+i*Math.sin(a)])(e,t,2.5*P.w,n);D.push({...te("bullet",1,o,l),angle:n,velX:i,velY:a})}}else P.attackTime=0})(),bullets=D.filter((e=>"bullet"===e.type)),enemies=D.filter((e=>2===e.collisionGroup)),bullets.forEach((e=>{e.ttl>0&&enemies.find((t=>{if(!t.invincible&&ee(e,t).collide)return t.hitPoints-=e.damage,t.invincible=!0,t.invincibleEndTime=z+250,e.ttl=-1,!0}))})),P.invincible||enemies.forEach((e=>{ee(e,P).collide&&(P.invincible=!0,P.invincibleEndTime=z+250)})),D.slice(1).forEach((e=>{const t=ee(P,e);t.collide&&((e,t,i)=>{const{entity1MaxX:a,entity1MaxY:n,entity2MaxX:o,entity2MaxY:l}=i,r=a-t.x,h=n-t.y,c=o-e.x,s=l-e.y;e.velX>0&&e.velY>0?h>r?e.x-=r:e.y-=h:e.velX>0&&0>e.velY?s>r?e.x-=r:e.y+=s:e.velX>0?e.x-=r:0>e.velX&&e.velY>0?h>c?e.x+=c:e.y-=h:0>e.velX&&0>e.velY?s>c?e.x+=c:e.y+=s:0>e.velX?e.x+=c:e.velY>0?e.y-=h:0>e.velY&&(e.y+=s)})(P,e,t)})),0>(e=P).x?e.x=0:e.x>G.width-e.w&&(e.x=G.width-e.w),0>e.y?e.y=0:e.y>G.height-e.h&&(e.y=G.height-e.h),D.forEach(ae),N>0&&N+F>P.x?N=Math.max(0,P.x-F):G.width>N+F+120&&P.x+P.w>N+F+120&&(N=Math.min(G.width-K,P.x+P.w-220)),U>0&&U+50>P.y?U=Math.max(0,P.y-50):G.height>U+50+140&&P.y+P.h>U+50+140&&(U=Math.min(G.height-j,P.y+P.h-190)),D=D.filter((e=>!e.ttl||e.ttl>z))}var e})(),(()=>{switch(k.clearRect(0,0,b.width,b.height),L){case 0:O.fillStyle="#fff",O.fillRect(0,0,Q.width,Q.height),Y("title screen",8,8),Y(X?"tap to start":"press any key",160,120,1),I===T.length&&Y("konami mode on",Q.width-8,8,2);break;case 1:O.drawImage(G,0,0,Q.width,Q.height),D.forEach((e=>((e,t=O)=>{switch(e.type){case"hero":t.save(),t.translate(e.x,e.y),0>e.gunAngle?(t.save(),t.translate(e.w/2,e.h/2),t.rotate(e.gunAngle),t.translate(e.w/4,0),t.fillStyle="#ee1",t.fillRect(0,-2,10,4),t.restore(),t.fillStyle=e.hitPoints?e.invincible?"#ee1":"#1e1":"#e11",t.fillRect(0,0,e.w,e.h)):(t.fillStyle=e.hitPoints?e.invincible?"#ee1":"#1e1":"#e11",t.fillRect(0,0,e.w,e.h),t.save(),t.translate(e.w/2,e.h/2),t.rotate(e.gunAngle),t.translate(e.w/4,0),t.fillStyle="#ee1",t.fillRect(0,-2,10,4),t.restore()),t.translate(e.w/2,e.h/2),t.rotate(e.aiAngle),t.translate(2.5*e.w,0),t.rotate(-e.aiAngle),t.fillStyle="#1ee",t.fillRect(-5,-5,10,10),t.restore();break;case"bullet":t.save(),t.translate(e.x,e.y),t.rotate(e.angle+Math.PI/2),t.fillStyle="#e1e",t.fillRect(0,0,e.w,e.h),t.restore();break;case"scout":case"tank":t.save(),t.translate(e.x,e.y),t.fillStyle=e.hitPoints?e.invincible?"#ee1":"#11e":"#e11",t.fillRect(0,0,e.w,e.h),t.restore();break;case"text":((e,t,i,a,n,o=0,l=1)=>{Y(e.substring(0,Math.floor(h(0,e.length,(n-a)/500))),t,i,o,l)})(e.text,e.x,e.y,e.startTime,z,e.align,e.scale)}})(e))),(()=>{O.strokeStyle="#fff",O.lineWidth=2;const e=P.attacking?10:12,t=P.attacking?5:6;O.strokeRect(S.x-1,S.y-1,2,2),O.strokeRect(S.x-t,S.y-t,e,e)})();break;case 2:O.fillStyle="#fff",O.fillRect(0,0,Q.width,Q.height),Y("end screen",8,8)}B.drawImage(Q,N,U,K,j,0,0,c.width,c.height),B.drawImage(q,0,0,K,j,0,0,c.width,c.height)})(),V=z)}function oe(e){($=e)?(V=performance.now(),ne()):cancelAnimationFrame(W)}onload=async()=>{document.title="Stand By Me",onresize(),await(async()=>{A=await s("data:image/webp;base64,UklGRngBAABXRUJQVlA4TGwBAAAvV8EBEB8gFkz258+bhkAgiWF/1wkEKAr/L5v/APCvBpIbwI0jiYD/0n9D4RzKZze0EtD672FnsP8Ngdyjj58hNIFh2ZtCRP8Vtm3bOED3UJ1eERFttqgREbO1GQQQS+Jca1QaDwpGnBHXek3SGi0ZiKOKiOS+1ykiE0al8gXudIFjgbt3hdJ4Ep0ErBMN1BXWC3OkRhF58Q85zJn/+T/RPjuUJ4IdxhW2mu944p2YTGRbRpntp23LxmRPIn96wL69T4OR7MSV9+Mr+g77pvjQathhF4OFXX7Bsz1K16GjDIXhpHBLuUER/vfED/tmKzn49W963N9hl/2yr+ydbepfYNuSZdeeWwu7zQXY28P7nPO8Q2GDsgZjAj/kZN2TbxR8Xi3b2cFjK1jcT5YcORVO8q5eO+VmlE5yP3sXdKRjyfRpKEvEf4/Fpc2TgyofNGvMiMNBco2Yed81rsTFPzgy6rVd67Hkjkh7vUoT")})(),await s("data:image/webp;base64,UklGRvoAAABXRUJQVlA4TO0AAAAvT0AEEDegkI0kaD+kdVj40zgoxYwkQfMfg2v9l2M9lkVNACQMNCEIOPq3MIcHQbZNzcZ+sgcAlZ/5PdWeeOv2wFEjSY40hsA6AKNGsFJJ/T/DYLQIHH8MN129s4cgov8M3LaNw7a7txjZL8LDMf4r1rB0GSKbF4K5y4uBYq1A7jI7NNPSPhx6rQhN3S6ELpWd5FLH6IMjN7si35Udo6HZUgsM1NDha+wM4Efs2i4OQugUTtuccnZpNrxcDsoNs07A9qEHl7O/h4PmDm65el34+cPABatIskq6UUQaaUtaABHLKZAohglQpAV4vgkA"),oe(!0)},onresize=onrotate=()=>{scaleToFit=Math.min(innerWidth/Q.width,innerHeight/Q.height),c.width=Q.width*scaleToFit,c.height=Q.height*scaleToFit,B.imageSmoothingEnabled=C.imageSmoothingEnabled=O.imageSmoothingEnabled=!1,window.focus()},document.onvisibilitychange=e=>{oe(!e.target.hidden)},addEventListener("keydown",(e=>{e.repeat||1!==L||"KeyP"!==e.code||oe(!$)}))})();</script>