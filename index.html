<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1"><meta name=monetization content=$ilp.uphold.com/2kD7NjJBDjBb><style>body{margin:0;text-align:center;background:#000}body,canvas{touch-action:none;user-select:none}</style><canvas id=c></canvas><script>(()=>{var e={},t=t=>e[t]||0,i=t=>delete e[t];addEventListener("keydown",(t=>{t.preventDefault(),t.repeat||(e[t.code]=performance.now())})),addEventListener("keyup",(e=>i(e.code)));var a=(...e)=>Math.max(...e.map((e=>t(e)))),n=()=>Object.keys(e).filter((e=>t(e))).length,o=e=>!!t(e)&&i(e),r=(e,t,i)=>Math.max(t,Math.min(e,i));function l(e,t,i){return 0>i?e:i>1?t:e*(1-i)+t*i}function h(e){return new Promise((t=>{var i=new Image;i.onload=()=>{t(i)},i.src=e}))}var g,s=0,d=0,w=0,f=0,y=0,v=0,m=0,x=0,p=0;addEventListener("pointerdown",(e=>{e.preventDefault(),g=e,p=performance.now(),[s,d]=[m,x]=[y,v]=R()})),addEventListener("pointermove",(e=>{e.preventDefault(),g=e,[s,d]=R(),p&&(s>m?w=l(0,1,((m=s)-y)/30):y>s?w=-l(0,1,(m-(y=s))/30):m>s&&w>=0?(y=s,w=0):s>y&&0>=w&&(m=s,w=0),d>x?f=l(0,1,((x=d)-v)/30):v>d?f=-l(0,1,(x-(v=d))/30):x>d&&f>=0?(v=d,f=0):d>v&&0>=f&&(x=d,f=0))})),addEventListener("pointerup",(e=>{e.preventDefault(),g=e,p=0,w=f=y=v=m=x=0}));var A,u,M,R=()=>[Math.floor(g.pageX),Math.floor(g.pageY)],b=()=>p,E=()=>!!b()&&(p=!0),k=/iPhone|iPad|Android/i.test(navigator.userAgent);function X(e,t,i,a=0,n=1){const o=8*n,r=e.length*o+(e.length-1)*n,l=2===a?r:1===a?r/2:0;[...e].forEach(((e,a)=>{M.drawImage(A,8*"abcdefghijklmnopqrstuvwxyz0123456789.:!-%,/".indexOf(e),0,8,8,t+a*n*9-l,i,o,o)}))}new(window.AudioContext||webkitAudioContext);var Y,D,S,I=["ArrowUp","ArrowUp","ArrowDown","ArrowDown","ArrowLeft","ArrowRight","ArrowLeft","ArrowRight","KeyB","KeyA"],L=0,N=0,T=0,U=0,K=100,P=c.getContext("2d"),j=c.cloneNode(),F=j.getContext("2d");j.width=640,j.height=480;var B=c.cloneNode(),Q=B.getContext("2d");B.width=640,B.height=480;var O,G,C,Z,z,H=(O=c,(u=O.cloneNode()).width=320,u.heigh=240,(M=u.getContext("2d")).imageSmoothingEnabled=!1,u),V={hero:{aiAngle:0,firingRate:.1,speed:75,w:10,h:10},AI:{speed:Math.PI},bullet:{speed:400,w:1,h:10},foe:{speed:100}},W=!0;function q(e,t,i=0,a=0){return{...V[e],collisionGroup:t,moveDown:0,moveLeft:0,moveRight:0,moveUp:0,velX:0,velY:0,type:e,x:i,y:a}}function J(e){const t=e.speed*C*(e.velX&&e.velY?.7071067811865476:1);e.x+=t*e.velX,e.y+=t*e.velY}function _(){W&&(z=requestAnimationFrame(_),G=performance.now(),C=(G-Z)/1e3,(()=>{switch((()=>{switch(N){case 0:o(I[L])&&L++,(n()||E())&&(L=0,T=U=0,Y=q("hero",1,160,120),D={x:Y.x,y:Y.y},S=[Y,{type:"text",text:"how does one die better than facing fearfull odds?",startTime:G,x_:8,y_:8}],Q.fillStyle="#ccc",Q.fillRect(0,0,B.width,B.height),Q.fillStyle="#777",[0,2,4,6,8,10].forEach((e=>{[0,2,4,6,8,10].forEach((t=>{Q.fillRect(64*e,48*t,64,48),Q.fillRect(64*(e+1),48*(t+1),64,48)}))})),N=1);break;case 1:[D.x,D.y]=(()=>{const[e,t]=(i=c.width,a=c.height,[r((g.x||g.pageX)-(innerWidth-i)/2,0,i),r(g.y||g.pageY,0,a)].map(Math.round));var i,a;return[320*e/c.width+T,240*t/c.height+U].map(Math.round)})(),Y.moveLeft=a("ArrowLeft","KeyA","KeyQ"),Y.moveRight=a("ArrowRight","KeyD"),Y.moveUp=a("ArrowUp","KeyW","KeyZ"),Y.moveDown=a("ArrowDown","KeyS");break;case 2:o("KeyT")&&(async e=>{if(navigator.canShare&&navigator.canShare(e))try{await navigator.share(e)}catch{}else open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(e.text)}%20${encodeURIComponent(e.url)}`,"_blank")})({title:document.title,text:"Check this game template made by @herebefrogs",url:"https://bit.ly/gmjblp"}),(n()||E())&&(N=0)}})(),N){case 1:Y.firing=b(),Y.velX=Y.moveLeft||Y.moveRight?(Y.moveLeft>Y.moveRight?-1:1)*l(0,1,(G-Math.max(Y.moveLeft,Y.moveRight))/150):0,Y.velY=Y.moveDown||Y.moveUp?(Y.moveUp>Y.moveDown?-1:1)*l(0,1,(G-Math.max(Y.moveUp,Y.moveDown))/150):0,Y.aiAngle+=V.AI.speed*C,Y.aiAngle%=2*Math.PI,S.forEach(J),(()=>{const e=Y.x+Y.w/2,t=Y.y+Y.h/2,[i,a,n]=((e,t,i,a)=>{const n=Math.sqrt(Math.pow(i-e,2)+Math.pow(a-t,2)),o=i-e,r=a-t;return[o/n,r/n,Math.atan2(r/n,o/n)]})(e,t,D.x,D.y);if(Y.gunAngle=n,Y.firing){if(Y.firingTime||=Y.firingRate,Y.firingTime+=C,Y.firingTime>Y.firingRate){Y.firingTime%=Y.firingRate;const[o,r]=((e,t,i,a)=>[e+i*Math.cos(a),t+i*Math.sin(a)])(e,t,2.5*Y.w,n);S.push({...q("bullet",1,o,r),angle:n,velX:i,velY:a})}}else Y.firingTime=0})(),S.slice(1).forEach((e=>{const t=((e,t)=>{const i={entity1MaxX:e.x+e.w,entity1MaxY:e.y+e.h,entity2MaxX:t.x+t.w,entity2MaxY:t.y+t.h};return i.collide=e.collisionGroup!=t.collisionGroup&&i.entity2MaxX>e.x&&i.entity1MaxX>t.x&&i.entity2MaxY>e.y&&i.entity1MaxY>t.y,i})(Y,e);t.collide&&((e,t,i)=>{const{entity1MaxX:a,entity1MaxY:n,entity2MaxX:o,entity2MaxY:r}=i,l=a-t.x,h=n-t.y,c=o-e.x,g=r-e.y;e.velX>0&&e.velY>0?h>l?e.x-=l:e.y-=h:e.velX>0&&0>e.velY?g>l?e.x-=l:e.y+=g:e.velX>0?e.x-=l:0>e.velX&&e.velY>0?h>c?e.x+=c:e.y-=h:0>e.velX&&0>e.velY?g>c?e.x+=c:e.y+=g:0>e.velX?e.x+=c:e.velY>0?e.y-=h:0>e.velY&&(e.y+=g)})(Y,e,t)})),0>(e=Y).x?e.x=0:e.x>B.width-e.w&&(e.x=B.width-e.w),0>e.y?e.y=0:e.y>B.height-e.h&&(e.y=B.height-e.h),T>0&&T+K>Y.x?T=Math.max(0,Y.x-K):B.width>T+K+120&&Y.x+Y.w>T+K+120&&(T=Math.min(B.width-320,Y.x+Y.w-220)),U>0&&U+50>Y.y?U=Math.max(0,Y.y-50):B.height>U+50+140&&Y.y+Y.h>U+50+140&&(U=Math.min(B.height-240,Y.y+Y.h-190))}var e})(),(()=>{switch(M.clearRect(0,0,u.width,u.height),N){case 0:F.fillStyle="#fff",F.fillRect(0,0,j.width,j.height),X("title screen",8,8),X(k?"tap to start":"press any key",160,120,1),L===I.length&&X("konami mode on",j.width-8,8,2);break;case 1:F.drawImage(B,0,0,j.width,j.height),S.forEach((e=>((e,t=F)=>{switch(e.type){case"hero":t.save(),t.translate(e.x,e.y),0>e.gunAngle?(t.save(),t.translate(e.w/2,e.h/2),t.rotate(e.gunAngle),t.translate(e.w/4,0),t.fillStyle="#ee1",t.fillRect(0,-2,10,4),t.restore(),t.fillStyle="#1e1",t.fillRect(0,0,e.w,e.h)):(t.fillStyle="#1e1",t.fillRect(0,0,e.w,e.h),t.save(),t.translate(e.w/2,e.h/2),t.rotate(e.gunAngle),t.translate(e.w/4,0),t.fillStyle="#ee1",t.fillRect(0,-2,10,4),t.restore()),t.translate(e.w/2,e.h/2),t.rotate(e.aiAngle),t.translate(2.5*e.w,0),t.rotate(-e.aiAngle),t.fillStyle="#1ee",t.fillRect(-5,-5,10,10),t.restore();break;case"bullet":t.save(),t.translate(e.x,e.y),t.rotate(e.angle+Math.PI/2),t.fillStyle="#e1e",t.fillRect(0,0,e.w,e.h),t.restore();break;case"text":((e,t,i,a,n,o=0,r=1)=>{X(e.substring(0,Math.floor(l(0,e.length,(n-a)/500))),t,i,o,r)})(e.text,e.x_,e.y_,e.startTime,G,e.align,e.scale)}})(e))),(()=>{F.strokeStyle="#fff",F.lineWidth=2;const e=Y.firing?10:12,t=Y.firing?5:6;F.strokeRect(D.x-1,D.y-1,2,2),F.strokeRect(D.x-t,D.y-t,e,e)})();break;case 2:F.fillStyle="#fff",F.fillRect(0,0,j.width,j.height),X("end screen",8,8)}F.drawImage(H,0,0,c.width,c.height,0,0,c.width,c.height),P.drawImage(j,T,U,320,240,0,0,c.width,c.height)})(),Z=G)}function $(e){(W=e)?(Z=performance.now(),_()):cancelAnimationFrame(z)}onload=async()=>{document.title="Stand By Me",onresize(),await(async()=>{A=await h("data:image/webp;base64,UklGRngBAABXRUJQVlA4TGwBAAAvV8EBEB8gFkz258+bhkAgiWF/1wkEKAr/L5v/APCvBpIbwI0jiYD/0n9D4RzKZze0EtD672FnsP8Ngdyjj58hNIFh2ZtCRP8Vtm3bOED3UJ1eERFttqgREbO1GQQQS+Jca1QaDwpGnBHXek3SGi0ZiKOKiOS+1ykiE0al8gXudIFjgbt3hdJ4Ep0ErBMN1BXWC3OkRhF58Q85zJn/+T/RPjuUJ4IdxhW2mu944p2YTGRbRpntp23LxmRPIn96wL69T4OR7MSV9+Mr+g77pvjQathhF4OFXX7Bsz1K16GjDIXhpHBLuUER/vfED/tmKzn49W963N9hl/2yr+ydbepfYNuSZdeeWwu7zQXY28P7nPO8Q2GDsgZjAj/kZN2TbxR8Xi3b2cFjK1jcT5YcORVO8q5eO+VmlE5yP3sXdKRjyfRpKEvEf4/Fpc2TgyofNGvMiMNBco2Yed81rsTFPzgy6rVd67Hkjkh7vUoT")})(),await h("data:image/webp;base64,UklGRvoAAABXRUJQVlA4TO0AAAAvT0AEEDegkI0kaD+kdVj40zgoxYwkQfMfg2v9l2M9lkVNACQMNCEIOPq3MIcHQbZNzcZ+sgcAlZ/5PdWeeOv2wFEjSY40hsA6AKNGsFJJ/T/DYLQIHH8MN129s4cgov8M3LaNw7a7txjZL8LDMf4r1rB0GSKbF4K5y4uBYq1A7jI7NNPSPhx6rQhN3S6ELpWd5FLH6IMjN7si35Udo6HZUgsM1NDha+wM4Efs2i4OQugUTtuccnZpNrxcDsoNs07A9qEHl7O/h4PmDm65el34+cPABatIskq6UUQaaUtaABHLKZAohglQpAV4vgkA"),$(!0)},onresize=onrotate=()=>{scaleToFit=Math.min(innerWidth/j.width,innerHeight/j.height),c.width=j.width*scaleToFit,c.height=j.height*scaleToFit,P.imageSmoothingEnabled=Q.imageSmoothingEnabled=F.imageSmoothingEnabled=!1,window.focus()},document.onvisibilitychange=e=>{$(!e.target.hidden)},addEventListener("keydown",(e=>{e.repeat||1!==N||"KeyP"!==e.code||$(!W)}))})();</script>